(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{58:function(e,t,n){},59:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(33),r=n.n(s),i=n(8),o=n(4),l=n(5),u=n(7),j=n(6),h=n(18),d=n.n(h),b=d.a.create({baseURL:"https://swap-lh.heroku.com/api",withCredentials:!0});function f(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var O={service:b,signup:function(e){return b.post("/auth/signup",e).then((function(e){return e.data})).catch(f)},signin:function(e){return b.post("/auth/signin",e).then((function(e){return e.data})).catch(f)},isLoggedIn:function(){return b.get("/auth/isLoggedIn").then((function(e){return e.data})).catch(f)},logout:function(){return b.get("/auth/logout").then((function(e){return e.data})).catch(f)},getSneakers:function(){return b.get("/sneakers").then((function(e){return e.data})).catch(f)},getOffers:function(){return b.get("/offers").then((function(e){return e.data})).catch(f)},deleteOffer:function(e){return b.delete("/offers/".concat(e)).then((function(e){return e.data})).catch(f)},updateOffer:function(e,t){return b.patch("/offers/".concat(e),t).then((function(e){return e.data})).catch(f)},addOffer:function(e){return b.post("/offers",e).catch(f)},getUserInfos:function(){return b.get("/users").then((function(e){return e.data})).catch(f)},updateUser:function(e,t){return b.patch("/users",t).then((function(e){return e.data})).catch(f)},getUserOffers:function(){return b.get("/users/offers").then((function(e){return e.data})).catch(f)}},p=a.a.createContext(),m=n(0),x=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.isLoggedIn().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return Object(m.jsx)(p.Provider,{value:e,children:this.props.children})}}]),n}(c.Component),g=n(2),v=n(9),N=function(e){return function(t){return Object(m.jsx)(p.Consumer,{children:function(n){return Object(m.jsx)(e,Object(v.a)(Object(v.a)({},t),{},{context:n}))}})}},y=(n(58),function(){return Object(m.jsx)("div",{className:"search-main",children:Object(m.jsxs)("form",{action:"/",method:"get",children:[Object(m.jsx)("label",{htmlFor:"search",children:Object(m.jsx)("span",{className:"visually-hidden"})}),Object(m.jsx)("input",{type:"text",id:"search",placeholder:"Search a sneaker",name:"search"}),Object(m.jsx)("button",{type:"submit",children:"Find"})]})})}),C=(n(59),N((function(e){var t=e.context;return Object(m.jsxs)("nav",{className:"NavMain",children:[Object(m.jsx)(i.c,{exact:!0,to:"/",children:Object(m.jsx)("h3",{className:"logo",children:"SWAP"})}),Object(m.jsxs)("ul",{className:"nav-list",children:[Object(m.jsx)("li",{children:Object(m.jsx)(y,{})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.c,{to:"/discover",children:"Discover"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.c,{to:"/about",children:"About"})}),t.isLoggedIn&&Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(i.c,{to:"/create-offer",children:"+ New Offer"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.c,{to:"/me",children:t.user&&t.user.username})}),Object(m.jsx)("li",{children:Object(m.jsx)("p",{onClick:function(){O.logout().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))},children:"Logout"})})]}),!t.isLoggedIn&&Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(i.c,{to:"/signin",children:"Log in"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.c,{to:"/signup",children:"Create account"})})]})]})]})}))),w=(n(65),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("img",{className:"background-home",src:"https://wallpapercave.com/wp/wp3631175.jpg",alt:"sneakerwall"})})}}]),n}(a.a.Component)),S=d.a.create({baseURL:"https://swap-lh.heroku.com",withCredentials:!0});function k(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var F={service:S,getMostPopular:function(){return S.get("/api/sneakers/home").then((function(e){return e.data})).catch(k)},getProducts:function(e){return S.get("/search/".concat(e)).then((function(e){return e.data})).catch(k)},getProductprices:function(e){return S.get("/id/".concat(e,"/prices")).then((function(e){return e.data})).catch(k)}},L=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){F.getMostPopular().then((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(m.jsx)("section",{className:"home",children:Object(m.jsx)("div",{children:Object(m.jsx)(w,{})})})}}]),n}(a.a.Component),U=n(14),I=n(16),R=(n(66),["children","className"]),A=function(e){var t=e.children,n=e.className,c=Object(I.a)(e,R);return Object(m.jsx)("button",Object(v.a)(Object(v.a)({},c),{},{className:"Button ".concat(n||""),children:t}))},D=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:""},e.handleChange=function(t){var n=t.target.name,c=t.target.value;e.setState(Object(U.a)({},n,c))},e.handleSubmit=function(t){t.preventDefault(),O.signin(e.state).then((function(t){e.props.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(m.jsx)(g.a,{to:"/"}):Object(m.jsxs)("section",{className:"form-section",children:[Object(m.jsxs)("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{type:"email",id:"email",name:"email"}),Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"password",name:"password"}),Object(m.jsx)(A,{children:"Submit"})]}),Object(m.jsx)("div",{className:"form-section link",children:Object(m.jsxs)("p",{children:["Don't have an account yet?  ",Object(m.jsx)(i.b,{to:"/signup",children:Object(m.jsx)("b",{children:"Register"})})]})})]})}}]),n}(c.Component),P=Object(g.g)(N(D)),E=function(e){return Object(m.jsx)(P,{})},z=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={firstName:"",lastName:"",username:"",email:"",password:""},e.handleChange=function(t){var n=t.target.value,c=t.target.name;e.setState(Object(U.a)({},c,n))},e.handleSubmit=function(t){t.preventDefault(),O.signup(e.state).then((function(t){e.props.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(m.jsx)(g.a,{to:"/"}):Object(m.jsx)("section",{className:"form-section",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(m.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(m.jsx)("input",{onChange:this.handleChange,value:this.state.firstName,type:"firstName",id:"firstName",name:"firstName"}),Object(m.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(m.jsx)("input",{onChange:this.handleChange,value:this.state.lastName,type:"lastName",id:"lastName",name:"lastName"}),Object(m.jsx)("label",{htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{onChange:this.handleChange,value:this.state.username,type:"username",id:"username",name:"username"}),Object(m.jsx)("label",{htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{onChange:this.handleChange,value:this.state.email,type:"email",id:"email",name:"email"}),Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{onChange:this.handleChange,value:this.state.password,type:"password",id:"password",name:"password"}),Object(m.jsx)(A,{children:"Submit"}),Object(m.jsx)("div",{className:"form-section link",children:Object(m.jsxs)("p",{children:["Already have an account? ",Object(m.jsx)(i.b,{to:"/signin",children:Object(m.jsx)("b",{children:"Sign in!"})})," "]})})]})})}}]),n}(c.Component),M=Object(g.g)(N(z)),W=function(e){return Object(m.jsx)(M,{})},T=["component","context"],_=N((function(e){var t=e.component,n=e.context,c=Object(I.a)(e,T);return n.isLoading?null:n.isLoggedIn?Object(m.jsx)(g.b,Object(v.a)(Object(v.a)({},c),{},{render:function(e){return Object(m.jsx)(t,Object(v.a)({},e))}})):Object(m.jsx)(g.a,{to:"/signin"})})),B=n(19),J=(n(67),function(e){var t=e.image,n=e.title,c=e._id,a=e.size,s=e.description,r=e.handleEdit,i=e.handleDelete;return Object(m.jsxs)("div",{className:"CardOffer",children:[Object(m.jsx)("div",{className:"round-image",children:Object(m.jsx)("img",{src:t,alt:n})}),Object(m.jsxs)("div",{className:"description",children:[Object(m.jsx)("h2",{children:n}),Object(m.jsxs)("h4",{children:["Size: ",a]}),Object(m.jsx)("p",{children:s}),Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)(A,{handleClick:function(e){return i(c)},secondary:!0,children:"Delete"}),Object(m.jsx)(A,{handleClick:function(e){return r(c)},primary:!0,children:"Edit"})]})]})]})}),Y=N(function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={userOffers:[],httpResponse:null},e.deleteOffer=function(t){O.deleteOffer(t).then((function(){var n=Object(B.a)(e.state.userOffers).filter((function(e){return e._id!==t}));e.setState({userOffers:n})}))},e.onOfferSelect=function(t){var n=e.state.userOffers.find((function(e){return e._id===t}));e.setState({selectedOffer:n})},e.handleOfferUpdate=function(t){var n=Object(B.a)(e.state.userOffers).map((function(e){return e._id===t._id?t:e}));e.setState({userOffers:n})},e.addOffer=function(t){e.setState({userOffers:[].concat(Object(B.a)(e.state.userOffers),[t])})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Promise.all([O.getUserInfos(),O.getUserOffers()]).then((function(t){var n=t[0],c=t[1];e.setState({user:n,userOffers:c})}))}},{key:"componentWillUnmount",value:function(){this.timeoutId&&clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this,t=this.state,n=(t.httpResponse,t.userOffers);return t.user?Object(m.jsxs)("section",{className:"Profile",children:[!n.length&&Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("div",{}),Object(m.jsx)("p",{children:"You don't have any items :("})]}),!!n.length&&Object(m.jsxs)("div",{className:"CardOffers",children:[Object(m.jsx)("h3",{children:"Your offers"}),n.map((function(t,n){return Object(m.jsx)(J,Object(v.a)(Object(v.a)({},t),{},{handleDelete:e.deleteOffer,handleEdit:e.onOfferSelect}),n)}))]})]}):null}}]),n}(c.Component)),V=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"SWAP YOUR SNEAKERS"})})}}]),n}(a.a.Component),q=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){F.getMostPopular().then((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Latest offers"}),Object(m.jsx)("h1",{children:"Most Popular"})]})}}]),n}(a.a.Component);function G(e,t,n){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var c=null==t?"":t;e.append(n,c)}else Object.keys(t).forEach((function(c){G(e,t[c],n?"".concat(n,"[").concat(c,"]"):c)}))}var K=function(e){var t=e.status,n=e.message;return Object(m.jsx)("div",{className:"FeedBack ".concat(t),children:Object(m.jsx)("p",{children:n})})},H=a.a.forwardRef((function(e,t){return Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("label",{className:"UploadWidget label",htmlFor:e.name,children:e.children}),Object(m.jsx)("input",{onChange:function(t){var n=t.target.files[0],c=URL.createObjectURL(n);e.onFileSelect&&e.onFileSelect(c)},ref:t,className:"UploadWidget input",id:e.name,name:e.name,type:"file"})]})})),Q=["httpResponse"],X={title:"",sku:"",description:"",condition:"",size:"",lookingFor:"",picture:[],price:""},Z=N(function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state=X,e.imageRef=a.a.createRef(),e.handleChange=function(t){var n=t.target.value,c=t.target.name;e.setState(Object(U.a)({},c,n))},e.handleSubmit=function(t){if(t.preventDefault(),e.state.title){var n=new FormData,c=e.state;c.httpResponse;G(n,Object(I.a)(c,Q)),n.append("image",e.imageRef.current.files[0]),O.addOffer(n).then((function(t){e.props.addOffer(t),e.setState(Object(v.a)(Object(v.a)({},X),{},{httpResponse:{status:"success",message:"Item successfully added."}})),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"An error occured, try again later."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)}))}else e.setState({error:"All categories are required !"},(function(){e.timeoutId=setTimeout((function(){e.setState({error:null})}),1e3)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.httpResponse,n=e.error;return Object(m.jsx)("div",{className:"FormOffer-container",children:Object(m.jsxs)("form",{className:"FormOffer",onSubmit:this.handleSubmit,children:[Object(m.jsx)("h2",{children:"Create your offer"}),t&&Object(m.jsx)(K,{message:t.message,status:t.status}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"label",htmlFor:"title",children:"Title"}),Object(m.jsx)("input",{className:"input",type:"text",onChange:this.handleChange,value:this.state.title,placeholder:"e.g.: Air Jordan 1 Union Blue Storm",name:"title"})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"label",htmlFor:"description",children:"Description"}),Object(m.jsx)("textarea",{value:this.state.description,onChange:this.handleChange,name:"description",id:"description",className:"text-area",placeholder:"e.g.: Worn a few times, great condition"})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"label",htmlFor:"condition",children:"Condition"}),Object(m.jsxs)("select",{name:"condition",id:"condition",onChange:this.handleChange,value:this.state.condition,children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"Condition:"}),Object(m.jsx)("option",{value:"new-with-tags",children:"New with tags"}),Object(m.jsx)("option",{value:"new-without-tags",children:"New without tags"}),Object(m.jsx)("option",{value:"very-good",children:"Very good"}),Object(m.jsx)("option",{value:"good",children:"Good"}),Object(m.jsx)("option",{value:"very-used",children:"Very used"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"label",htmlFor:"size",children:"Size (EU)"}),Object(m.jsxs)("select",{name:"size",id:"size",onChange:this.handleChange,value:this.state.size,children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"Select a size:"}),Object(m.jsx)("option",{value:"36",children:"36"}),Object(m.jsx)("option",{value:"36.5",children:"36.5"}),Object(m.jsx)("option",{value:"37",children:"37"}),Object(m.jsx)("option",{value:"37.5",children:"37.5"}),Object(m.jsx)("option",{value:"38",children:"38"}),Object(m.jsx)("option",{value:"38.5",children:"38.5"}),Object(m.jsx)("option",{value:"39",children:"39"}),Object(m.jsx)("option",{value:"40",children:"40"}),Object(m.jsx)("option",{value:"40.5",children:"40.5"}),Object(m.jsx)("option",{value:"41",children:"41"}),Object(m.jsx)("option",{value:"42",children:"42"}),Object(m.jsx)("option",{value:"42.5",children:"42.5"}),Object(m.jsx)("option",{value:"43",children:"43"}),Object(m.jsx)("option",{value:"44",children:"44"}),Object(m.jsx)("option",{value:"44.5",children:"44.5"}),Object(m.jsx)("option",{value:"45",children:"45"}),Object(m.jsx)("option",{value:"46",children:"46"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"label",htmlFor:"lookingFor",children:"Looking for:"}),Object(m.jsx)("textarea",{value:this.state.lookingFor,onChange:this.handleChange,name:"lookingFor",id:"lookingFor",className:"text-area",placeholder:"What are you looking for?"})]}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)(H,{ref:this.imageRef,name:"picture",children:"Upload picture"})}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"label",htmlFor:"price",children:"Price"}),Object(m.jsx)("input",{value:this.state.price,onChange:this.handleChange,className:"input",type:"number",name:"price"})]}),n&&Object(m.jsx)(K,{message:n,status:"failure"}),Object(m.jsx)(A,{primary:!0,children:"Add"})]})})}}]),n}(c.Component));var $=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(C,{}),Object(m.jsxs)(g.d,{children:[Object(m.jsx)(g.b,{exact:!0,path:"/",component:L}),Object(m.jsx)(g.b,{exact:!0,path:"/signin",component:E}),Object(m.jsx)(g.b,{exact:!0,path:"/signup",component:W}),Object(m.jsx)(_,{path:"/me",component:Y}),Object(m.jsx)(g.b,{exact:!0,path:"/create-offer",component:Z}),Object(m.jsx)(g.b,{exact:!0,path:"/about",component:V}),Object(m.jsx)(g.b,{exact:!0,path:"/discover",component:q})]})]})};n(68),n(69);r.a.render(Object(m.jsx)(i.a,{children:Object(m.jsx)(x,{children:Object(m.jsx)($,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.8b9c9963.chunk.js.map